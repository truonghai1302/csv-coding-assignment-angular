<div class="mat-typography">
  <main class="p-5">
    <h2>
      <strong>
        Tasks
      </strong>
    </h2>
    <div>
      <button mat-raised-button color="primary" (click)="onNewTask()">New Task</button>

      <mat-form-field appearance="fill" class="m-2">
        <mat-label>User</mat-label>
        <mat-select [(ngModel)]="filterUser">
          <mat-option *ngFor="let u of users$ | async" [value]="u.id">{{u.name}}</mat-option>
        </mat-select>
      </mat-form-field>
      
    </div>

    <div class="flex justify-around">
      <div>
        <h3>
          Task List
        </h3>
        <ul>
          <li *ngFor="let t of incompleteTasks$ |async">
            <mat-card class="m-2">
              <mat-card-title>{{t.id}}</mat-card-title>
              <mat-card-content>
                <div>
                  <h4>
                    Description
                  </h4>
                  <p>
                    {{t.description}}    
                  </p>
                </div>
                <div>
                  <mat-slide-toggle (toggleChange)="onToggleChange(t.id, t.completed)" [checked]="t.completed" color="primary">
                    {{ t.completed ? 'Completed' : 'Incomplete' }}
                  </mat-slide-toggle>
                </div>
                
              </mat-card-content>
              <mat-card-actions align="end">
                <button mat-button (click)="onUpdateTask(t)">
                  UPDATE
                </button>
              </mat-card-actions>
            </mat-card>
          </li>
        </ul>
      </div>
  
      <div>
        <h3>Completed Tasks</h3>

        <ul>
          <li *ngFor="let t of completeTasks$ |async">
            <mat-card class="m-2">
              <mat-card-title>{{t.id}}</mat-card-title>
              <mat-card-content>
                <div>
                  <h4>
                    Description
                  </h4>
                  <p>
                    {{t.description}}    
                  </p>
                </div>
                <div>
                  <mat-slide-toggle (toggleChange)="onToggleChange(t.id, t.completed)" [checked]="t.completed" color="primary">
                    {{ t.completed ? 'Completed' : 'Incomplete' }}
                  </mat-slide-toggle>
                </div>
                
              </mat-card-content>
              <mat-card-actions align="end">
                <button mat-button [routerLink]="t.id">
                  UPDATE
                </button>
              </mat-card-actions>
            </mat-card>
          </li>
        </ul>
      </div>
    </div>
    
  </main>
</div>